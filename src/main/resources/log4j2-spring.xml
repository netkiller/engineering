<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
	<properties>
		<property name="log.pattern">[%d{yyyy-MM-dd HH:mm:ss}] [${hostName}] [%p] [%t] %l - %m%n</property>
		<property name="log.home">/tmp/logs</property>
		<property name="log.level">info</property>
	</properties>
	<Appenders>
		<Console name="Console" target="SYSTEM_OUT">
			<PatternLayout pattern="${log.pattern}" />
		</Console>

		<RollingFile name="File" fileName="/tmp/finance.log" filePattern="/tmp/finance.%d{yyyy-MM-dd}.log">
			<PatternLayout pattern="${log.pattern}" />
			<Policies>
				<TimeBasedTriggeringPolicy interval="1" modulate="false" />
			</Policies>
			<Filters>
				<MarkerFilter marker="finance" onMatch="ACCEPT" onMismatch="NEUTRAL" />
				<MarkerFilter marker="jzb" onMatch="ACCEPT" onMismatch="DENY" />
			</Filters>
		</RollingFile>

		<Gelf name="dev" host="udp:172.18.200.10" port="12201" version="1.1" extractStackTrace="true" filterStackTrace="true" mdcProfiling="true" includeFullMdc="true" maximumMessageSize="8192" originHost="%host{fqdn}">
			<Field name="timestamp" pattern="%d{yyyy-MM-dd HH:mm:ss.SSS}" />
			<Field name="logger" pattern="%logger" />
			<Field name="level" pattern="%level" />
			<Field name="class" pattern="%C{1}" />
			<Field name="method" pattern="%M" />
			<Field name="line" pattern="%L" />
			<Field name="marker" pattern="%marker" />
			<Field name="service" pattern="${spring:spring.application.name}" />
			<Field name="environment" pattern="${spring:spring.profiles.active}" /> 
			<!-- <Filters>
				<MarkerFilter marker="finance" onMatch="ACCEPT" onMismatch="NEUTRAL" />
				<MarkerFilter marker="jzb" onMatch="ACCEPT" onMismatch="DENY" />
			</Filters> -->
		</Gelf>
	</Appenders>
	<Loggers>
		<Root level="${sys:log.level}">
			<AppenderRef ref="Console" />
			<AppenderRef ref="File" />
			<AppenderRef ref="${spring:profiles.active}" />
		</Root>
	</Loggers>
</Configuration>